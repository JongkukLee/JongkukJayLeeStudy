---
layout: default
---
# BCI433
---


## LAB10 ##

PF-SRC MAKE FILTER

WRKOBJPDM (F4)
- DT433A11
- PGM


SQLCA
SQLCODE
 = 0 SUCCESSFUL EXEC OF SQL
 > 0 SUCCESS EXEC WITH AS WARNING
 = 100 ROW NOT FOUND (NO MORE ROW)
 < 0 ERROR OCCURED (UNSUCCESS EXEC)



SQLWN0 - SET TO 'W' IF AT LEAST ONE OTHER INDICATOR CONTAINS A 'W'. IT IS BLACK IF ALL THE OTHER INDICATORS ARE BLANK

SQLWN1 - TRUNCATION 

SQLWN2 - CONTAINS 'W' IF NULL VALUES WERE ELIMINATED 

SQLWN3 - 

SQLWNA - 


-----------------------
SLTCUSTCITY
 - TORONTO
NEW DISCOUNT
 - 12

STATIC EMBEDED SQL STATEMMENT: FIGURE OUT WHEN IT IS COMPILED IN PRECOMPILE STAGE

THE STRUCTURE DOES NOT CHANGE INT THE PROGRAM. THE PRECOMIILER WILL BUILD THE APPROPRIATE HIGH LEVEL LANGUAGE STATEMENTS. ONLY VALUES SUPPLIED BY HOST VARIABLES USED IN THE STATEMENT MAY CHANGE.
```
EXEC SQL
	UPDATE CUSTOMER
	SET DISCOUNT = :NEWDISC
	WHERE SHIPCITY = :SLTCUSTCITY;

	SELECT	CUSTID, 
		NAME,
		SHIPCITY,
		DISCOUNT

	INTO	:CSCUSTID, 
		:CSNAME,
		:CSSHIPCITY :CSCITYNULL -- INDICATE VALIABLES,
		:CSDICOUNT :CSDISCNULL --,
	FROM	CUSTOMER
	WHERE CUSTID = :SLTCUSTID;
```

IF MULTIPLE ROWS ARE RETRIVED, THEN THIS STATEMENT FAILS
IF ONE ROW IS RETRIVED THIS STATEMENT SUCCEEDS

	**:CSCITYNULL AND :CSDISCNULL ARE INDICATOR VARIABLES** IF THEY ARE SET TO -1 THAN THE VALUE WAS NULL
```
EXEC SQL
	SELECT	AVG(DISCOUNT) 
	INTO	:AVGDISC :AVGDISCNULL
	FORM	CUSTOMER

	INSERT INTO CUSTOMER
			(CUSTID,
			NAME,
			SHIPCITY,
			DISCOUNT)
		VALUES (:CSCUSTID,
			:CSNAME,
			:CSHIPCITY :CSCITYNULL,
			:CSDISCOUNT :CSDISCNULL);

-- WHEN THE INDICATOR VARIABLES IS -1 THE CULUMN IS SET TO NULL
	D CSCITYNULL	4B	0

	-- B: BINARY, 0: NUMERIC
```
```
EXEC SQL
	DELETE FORM CUSTOMER
	WHERE CUSTID = :SLCCUSTID;
```


CONTACTF17	E	DS





	








	











